C51 COMPILER V8.06   LCD                                                                   12/20/2017 13:49:27 PAGE 1   


C51 COMPILER V8.06, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN LCD.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE LCD.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include"head.h"
   2          
   3          uchar seg[4]={0x0a,0,0,0};
   4          
   5          void calSEG(int n)
   6          {
   7   1              bit signFlag=1;
   8   1              uchar digit[2];
   9   1              uchar lcdCode[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};
  10   1              uchar units,tens;
  11   1              if(n<0)
  12   1              {
  13   2                      seg[2]=0x40;
  14   2                      signFlag=0;
  15   2                      n=-n;
  16   2              }
  17   1              if(n>99)
  18   1              {
  19   2                      seg[0]=0x2a;
  20   2                      seg[2]=0x0;
  21   2                      seg[3]=0x0;
  22   2                      seg[4]=0x0;
  23   2              }
  24   1              else
  25   1              {
  26   2                      digit[0]=n%10;
  27   2                      digit[1]=(n/10)%10;
  28   2                      tens=lcdCode[digit[1]];
  29   2                      units=lcdCode[digit[0]];
  30   2                      seg[0]|=(tens&0x01)<<2                                          |       (units&0x01);
  31   2                      seg[1]|=((tens&0x40)>>3 |       (tens&0x02)<<1) |       ((units&0x40)>>5        |       (units&0x02)>>1);
  32   2                      seg[2]|=((tens&0x20)>>2 |       (tens&0x04))    |       ((units&0x20)>>4        |       (units&0x04)>>2);
  33   2                      seg[3]|=((tens&0x10)>>1 |       (tens&0x08)>>1) |       ((units&0x10)>>3        |       (units&0x08)>>3);
  34   2              }
  35   1      }
  36          
  37          
  38          
  39          void lcdShow(int n)
  40          {
  41   1              uchar i,j;
  42   1              uchar highSet[4]={0x0e,0x0d,0x0b,0x07};
  43   1              uchar lowSet[4]={0x01,0x02,0x04,0x08};
  44   1              j=10;
  45   1              calSEG(n);
  46   1              while(j--)
  47   1              {
  48   2                      for(i=0;i<4;i++)
  49   2                      {
  50   3                              P3M1=0x0f;
  51   3                              P3M0=0x00;
  52   3                              P1=seg[i];
  53   3                              P3M1=highSet[i];
  54   3                              P3M0=lowSet[i];
  55   3                              P3=~(0x01<<i);
C51 COMPILER V8.06   LCD                                                                   12/20/2017 13:49:27 PAGE 2   

  56   3                              DelayNms(2);
  57   3                              P3=~P3;
  58   3                              P1=~P1;
  59   3                              DelayNms(2);
  60   3                      }       
  61   2              }
  62   1      
  63   1              
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    374    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4      32
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
